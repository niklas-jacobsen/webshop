<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= item.name %> - Webshop</title>
    <link rel="stylesheet" type="text/css" href="../css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
  </head>

  <body>
    <header>
      <script>
        const product = {
          id: "<%= item.id %>",
          name: "<%= item.name %>",
          price: "<%= item.price %>",
          image_url: "<%= item.image_url %>",
        };
      </script>
      <div>
        <ul class="navbar">
          <div class="navbar_inline">
            <li class="navbar_item">Webshop</li>
            <a href="/"><li class="navbar_item">Home</li></a>
            <a href="/account"><li class="navbar_item">Account</li></a>
            <% if(!token) { %>
            <a href="/login"><li style="float: right" class="navbar_item">Log In</li></a>
            <% } else { %>
            <a href="/logout"><li style="float: right" class="navbar_item">Log Out</li></a>
            <a href="/cart">
              <li style="float: right" class="navbar_item cart_icon">
                <span class="material-symbols-outlined"> shopping_bag </span>
                <% if(cart?.length > 0 ) { %>
                <span class="cart_badge" id="cartCount"> <%= cart?.length %> </span>
                <% } %>
              </li>
            </a>
            <% } %>
          </div>
        </ul>
      </div>
    </header>
    <div style="display: grid; grid-template-columns: 1fr 1fr; height: 93.8vh">
      <div style="display: flex; flex-flow: column; align-items: center">
        <h2 style="margin-top: 25%"><%= item.name %></h2>
        <h4 style="margin-bottom: 0px">Description</h4>
        <p style="text-align: center; margin-top: 10px; margin-left: 20%; margin-right: 20%"><%= item.description %></p>
        <p>In Stock: <%= item.stock %></p>
        <h4><%= item.price %> â‚¬</h4>
        <% if(!token) { %>
        <button onclick="window.location = '/login'">Add to cart</button>
        <% } else { %>
        <button onclick="addToCart(event, product), window.location.reload()">Add to cart</button>

        <% } %>
      </div>
      <div style="display: flex; justify-content: center; align-items: center">
        <div style="height: 420px; margin-right: 10%; overflow: hidden">
          <img class="item_image" src="<%= item.image_url %> " />
        </div>
      </div>
    </div>
  </body>
  <script type="text/javascript" src="../helpers/cookieHelper.js"></script>
  <script type="text/javascript" src="../cart.js"></script>
</html>
